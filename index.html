<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:title" content=UVMOD - Online Quansheng Firmware Patcher>
  <meta property="og:site_name" content=UVMOD>
  <meta property="og:url" content=https://whosmatt.github.io/uvmod />
  <meta property="og:description"
    content="Web-based tool to generate customizable modded firmware for various Quansheng handheld radios.">
  <meta property="og:type" content=website>
  <meta property="og:image" content=https://whosmatt.github.io/uvmod/img/banner.webp>

  <title>UVMOD</title>

  <link rel="icon" type="image/x-icon" href="img/favicon.ico">
  <!-- Custom fonts for this template-->
  <link href="fonts/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="fonts/nunito.css" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="css/sb-admin-2.min.css" rel="stylesheet">

  <!-- animated gradient background and other animations-->
  <style>
    html {
      height: 100%;
    }

    body {
      min-height: 100%;
      background: linear-gradient(-45deg, #ee9052, #e05578, #5abde0, #23d5ab);
      background-size: 400% 400%;
      background-attachment: fixed;
      animation: gradient 30s ease infinite;
    }

    @keyframes gradient {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    .marquee {
      display: none;
      left: 0;
      position: absolute;
      top: 0;
    }

    @keyframes fadeInFromTop {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card-body {
      animation: fadeInFromTop 1s ease-in-out;
    }

    @keyframes fadeInFromBottom {
      from {
        opacity: 0;
        transform: translateY(+10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #content-wrapper {
      animation: fadeInFromBottom 0.7s ease-out;
    }

    checkbox {
      cursor: pointer;
    }
  </style>
</head>

<div class="marquee">
  <svg width="153px" height="69px">
    <g>
      <path class="logo"
        d="M140.186,63.52h-1.695l-0.692,5.236h-0.847l0.77-5.236h-1.693l0.076-0.694h4.158L140.186,63.52L140.186,63.52z M146.346,68.756h-0.848v-4.545l0,0l-2.389,4.545l-1-4.545l0,0l-1.462,4.545h-0.771l1.924-5.931h0.695l0.924,4.006l2.078-4.006 h0.848V68.756L146.346,68.756z M126.027,0.063H95.352c0,0-8.129,9.592-9.654,11.434c-8.064,9.715-9.523,12.32-9.779,13.02 c0.063-0.699-0.256-3.304-3.686-13.148C71.282,8.7,68.359,0.062,68.359,0.062H57.881V0L32.35,0.063H13.169l-1.97,8.131 l14.543,0.062h3.365c9.336,0,15.055,3.747,13.467,10.354c-1.717,7.24-9.91,10.416-18.545,10.416h-3.24l4.191-17.783H10.502 L4.34,37.219h20.578c15.432,0,30.168-8.13,32.709-18.608c0.508-1.906,0.443-6.67-0.764-9.527c0-0.127-0.063-0.191-0.127-0.444 c-0.064-0.063-0.127-0.509,0.127-0.571c0.128-0.062,0.383,0.189,0.445,0.254c0.127,0.317,0.19,0.57,0.19,0.57l13.083,36.965 l33.344-37.6h14.1h3.365c9.337,0,15.055,3.747,13.528,10.354c-1.778,7.24-9.972,10.416-18.608,10.416h-3.238l4.191-17.783h-14.481 l-6.159,25.976h20.576c15.434,0,30.232-8.13,32.709-18.608C152.449,8.193,141.523,0.063,126.027,0.063L126.027,0.063z M71.091,45.981c-39.123,0-70.816,4.512-70.816,10.035c0,5.59,31.693,10.034,70.816,10.034c39.121,0,70.877-4.444,70.877-10.034 C141.968,50.493,110.212,45.981,71.091,45.981L71.091,45.981z M68.55,59.573c-8.956,0-16.196-1.523-16.196-3.365 c0-1.84,7.239-3.303,16.196-3.303c8.955,0,16.195,1.463,16.195,3.303C84.745,58.05,77.505,59.573,68.55,59.573L68.55,59.573z" />
    </g>
  </svg>
</div>

<body id="page-top" class="bg-dark">

  <!-- Page Wrapper -->
  <div id="wrapper animated--grow-in">

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column" style="background-color: inherit;">

      <!-- Main Content -->
      <div id="content">

        <!-- Begin Page Content -->
        <div class="container mt-4" style="max-width: 1440px;">

          <!-- Page Heading -->
          <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <h1 id="logo" class="h3 mb-0 text-white" style="text-shadow: 0px 0px 5px #ffffffa6; font-size: 3em;">UVMOD
            </h1>
            <button class="d-none d-sm-inline-block btn btn-sm btn-light shadow-lg" type="button" data-toggle="collapse"
              data-target="#instructions">&nbsp;显示说明&nbsp;</button>
          </div>

          <div id="instructions" class="row collapse">
            <div class="col-lg-12">
              <div class="card shadow mb-4">
                <div class="card-header py-3">
                  <h6 class="m-0 font-weight-bold text-primary">说明</h6>
                </div>
                <div class="card-body">
                  <h2 class="mb-4">UVMOD</h2>
                  <p>此工具可为泉盛 UV-K5、UV-K6、UV-K5（8） UV-5R和UV-5R Plus 创建自定义固件，需要一根兼容的K头刷机线和驱动程序。</p>

                  <h3 class="mt-4">用法</h3>
                  <ol>
                    <li>选择所需的Mod并根据需要进行自定义。请参阅每个Mod的描述以了解用法。</li>
                    <li>在右侧可以选择电台型号，但也可以将其设置为“所有型号”来创建一个绕过版本检查的通用固件。</li>
                    <li>单击“打包”并观察控制台输出，其中将显示错误以及固件最终大小。如果你收到固件大小超大警告，你必须取消一些Mod然后重试。</li>
                    <li>单击“保存”以下载打包完成的固件文件。</li>
                  </ol>

                  <h3 class="mt-4">刷机</h3>
                  <p>如果您使用Windows，则可以使用官方更新程序工具。您可以直接从UVMOD控制台窗口中的链接下载使用。</p>
                  <ol>
                    <li>将刷机线连接到计算机，并确保安装了正确的驱动程序。在设备管理器，它应该显示为COM端口。</li>
                    <li>启动更新程序工具，选择 COM 端口，然后单击连接。</li>
                    <li>加载自定义固件。</li>
                    <li>在断开连接并关闭的手台上，按住PTT的同时打开手台。此时手电筒应该打开且屏幕为关闭保状态，此时手台处于刷机模式。</li>
                    <li>将刷机线连接到手台。更新程序工具中的“更新”按钮现在应该变得可点击。</li>
                    <li>单击更新并等待工具完成。</li>
                    <li>全部完成，您的所有设置仍应保持不变。</li>
                  </ol>
                  <h3 class="mt-4">隐藏 Mods</h3>
                  <p>出于安全原因，有些 Mod 未在列表中列出，可以在此处启用。请详见以下警告：</p>
                  <ul>
                    <li><b>只有在您了无线电杂散的概念并拥有过滤它们的设备时才使用 发射修改 MODS！</b></li>
                    <li><b>在任何情况下，都不要通过航空频段发射或干扰其他关键基础设施！</b></li>
                    <li>以非法频率发射会导致巨额罚款甚至入狱。</li>
                    <li>无线电硬件仅设计用于VHF和UHF。在其他频率上启用 TX 不会改变这一情况。在VHF和UHF频段之外的频率上将具有非常低的输出功率和非常高的SWR，这可能会损坏设备。同时设备会输出大量的杂散、杂散甚至比载波信号强。
                      <b>例如，在CB频段上传输将在CB（微瓦）上传输无用的功率，同时在其他几个频率上发射大量功率。 </b></li>
                    </li>
                    <li>你对自己的行为负全部责任！</li>
                  </ul>
                  <p>如果同意这些警告和条款，现在可以通过<a onclick="showHiddenMods()" class="card-link" style="cursor: pointer;"><b>单击此处</b></a>显示隐藏的 Mod。 </p>
                  <p>Mod 将显示在列表中，并带有红色边框和标题。</p>
                </div>

              </div>
            </div>
          </div>

          <!-- Content Row -->
          <div class="row">

            <div class="col mb-4">
              <!-- Mods -->
              <div class="card shadow-lg mb-4">
                <div class="card-header py-3 d-flex">
                  <div class="mr-auto">
                    <h6 class="m-0 font-weight-bold text-primary">Mods</h6>
                  </div>
                  <a style="line-height: 1 !important;" target="_blank" rel="nofollow"
                    href="https://github.com/whosmatt/UV-K5-patcher">贡献 Mods &rarr;</a>
                </div>
                <div id="modsContainer" class="card-body">
                </div>
              </div>
            </div>

            <div class="col-lg-4 mb-4">
              <!-- Console -->
              <div class="card shadow mb-4 sticky-top" style="top: 1.5rem">
                <div class="card-header py-3 d-flex">
                  <div class="mr-auto">
                    <h6 class="m-0 font-weight-bold text-primary">控制台</h6>
                  </div>
                  <a style="line-height: 1 !important;" target="_blank" rel="nofollow"
                    href="fw/uvk5updater.zip">下载刷机工具 &rarr;</a>
                </div>
                <div class="card-body">
                  <div>
                    <div class="d-flex justify-content-center">
                      <textarea id="console" class="w-100 form-control" style="height: 10em;" readonly></textarea>
                    </div>
                  </div>
                  <div>
                    <div class="input-group mt-4">
                      <div id="useDefaultFirmwareDiv" class="input-group-prepend" style="cursor:pointer">
                        <div class="input-group-text">
                          <input id="useDefaultFirmware" type="checkbox" checked style="cursor: pointer;">
                        </div>
                      </div>
                      <div id="customFileInputDiv" class="custom-file d-none">
                        <input id="customFileInput" type="file" class="custom-file-input">
                        <label id="customFileLabel" class="custom-file-label" for="customFileInput">选择其他固件
                          (仅v26)</label>
                      </div>
                      <span id="useDefaultFirmwareSpan" class="form-control" readonly>使用预置v26固件</span>
                    </div>
                    <select class="form-control mt-2" id="firmwareVersionSelect">
                      <option value="*">为所有型号打包</option>
                      <option value="2">为UV-K5打包</option>
                      <option value="3">为UV-K6, UV-K5(8)打包</option>
                      <option value="4">为UV-5R Plus打包</option>
                    </select>
                  </div>

                  <div class="mt-2">
                    <a id="patchButton" onclick="patch()" class="btn btn-primary btn-icon-split w-100">
                      <span class="icon text-white-50">
                        <i class="fas fa-wrench"></i>
                      </span>
                      <span class="text w-100">打包固件</span>
                    </a>
                  </div>
                  <div class="mt-2 d-flex">
                    <a id="downloadButton" class="btn btn-dark btn-icon-split mr-1 disabled w-100">
                      <span class="icon text-white-50">
                        <i class="fas fa-download"></i>
                      </span>
                      <span class="text w-100">保存固件</span>
                    </a>
                    <a id="flashButton" onclick="startFlasher()" class="btn btn-dark btn-icon-split disabled w-100">
                      <span class="icon text-white-50">
                        <i class="fab fa-usb"></i>
                      </span>
                      <span class="text w-100">Coming soon</span>
                    </a>
                  </div>
                </div>

              </div>


            </div>

          </div>

        </div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Bootstrap core JavaScript-->
  <script src="js/vendor/jquery.min.js"></script>
  <script src="js/vendor/bootstrap.bundle.min.js"></script>
  <script src="js/vendor/bs-custom-file-input.min.js"></script>
  <script async src="https://umami.zzz667.tk:20000/script.js" data-website-id="c488f030-cfc6-4a8b-8864-d0c91c8ce712"></script>
  <!-- Core plugin JavaScript-->

  <!-- Patcher JavaScript -->
  <script src="js/fwpack.js"></script>
  <script src="js/qsflash.js"></script>
  <script src="js/modframework.js"></script>
  <script src="mods.js"></script>
  <script src="js/init.js"></script>

  <!-- Easter egg, click the title -->
  <script>
    const marqueediv = document.getElementById("marquee");

    (function ($, window, undefined) {
      $.fn.marqueeify = function (options) {
        var settings = $.extend({
          horizontal: true,
          vertical: true,
          speed: 100, // In pixels per second
          container: $(this).parent(),
          bumpEdge: function () { }
        }, options);

        return this.each(function () {
          var containerWidth, containerHeight, elWidth, elHeight, move, getSizes,
            $el = $(this);

          getSizes = function () {
            containerWidth = settings.container.outerWidth();
            containerHeight = settings.container.outerHeight();
            elWidth = $el.outerWidth();
            elHeight = $el.outerHeight();
          };

          move = {
            right: function () {
              $el.animate({ left: (containerWidth - elWidth) }, {
                duration: ((containerWidth / settings.speed) * 1000), queue: false, easing: "linear", complete: function () {
                  settings.bumpEdge();
                  move.left();
                }
              });
            },
            left: function () {
              $el.animate({ left: 0 }, {
                duration: ((containerWidth / settings.speed) * 1000), queue: false, easing: "linear", complete: function () {
                  settings.bumpEdge();
                  move.right();
                }
              });
            },
            down: function () {
              $el.animate({ top: (containerHeight - elHeight) }, {
                duration: ((containerHeight / settings.speed) * 1000), queue: false, easing: "linear", complete: function () {
                  settings.bumpEdge();
                  move.up();
                }
              });
            },
            up: function () {
              $el.animate({ top: 0 }, {
                duration: ((containerHeight / settings.speed) * 1000), queue: false, easing: "linear", complete: function () {
                  settings.bumpEdge();
                  move.down();
                }
              });
            }
          };
          getSizes();
          if (settings.horizontal) {
            move.right();
          }
          if (settings.vertical) {
            move.down();
          }

          // Make that shit responsive!
          $(window).resize(function () {
            getSizes();
          });
        });
      };
    })(jQuery, window);

    var marqueeified = false;
    $("#logo").click(function () {
      $('.marquee').toggle();
      if (!marqueeified) {
        $('.marquee').marqueeify({
          speed: 150,
          bumpEdge: function () {
            var newColor = "hsl(" + Math.floor(Math.random() * 360) + ", 100%, 50%)";
            $('.marquee .logo').css('fill', newColor);
          }
        });
        marqueeified = true;
      }
    });
  </script>


</body>

</html>
